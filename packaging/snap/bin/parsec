#! /bin/sh

mkdir -p ~/.config/parsec
export XDG_CURRENT_DESKTOP=unknown
PYTHON=${SNAP}/usr/bin/python3.8
export PYTHONPATH=${SNAP}/site-packages

# SNAP env variable is used by Qt to determine we are within a sandbox
# and hence should use xdg-desktop-portal. However this is broken
# (see https://github.com/Scille/parsec-cloud/issues/702) so we bypass this
# and fallback to xdg-open which is fine given we use snap in classic mode
# (i.e. without sandbox).
unset SNAP

exec $PYTHON -m parsec.cli core gui $@
